{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst apiKey = `52950914-a47a655b15acf3b435807e601`;\naxios.defaults.baseURL = 'https://pixabay.com/api/'; \n\nasync function getImagesByQuery(query, page = 1) {\n    try {\n        const response = await axios.get(\"\", {\n            params: {\n                key: apiKey,\n                q: query,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: true,\n                page: page,\n                per_page: 15,\n                \n            }\n        });\n        return response.data;\n    }\n    catch (error) {\n        console.error('Error fetching images:', error);\n        throw error;\n    }\n}; \n\nexport { getImagesByQuery,};","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\"\nlet gallery_box = new SimpleLightbox('.gallery a', {\n    captionDelay: 250,\n    enableKeyboard: true,\n    showCounter: true,\n    scrollZoom: true,\n    loop: true,\n    overlayOpacity: 0.9,\n    animationSpeed: 250\n});\nconst loader = document.querySelector('.loader');\nfunction showLoader() {\n    loader.classList.add('visible');\n};\nfunction hideLoader() {\n    loader.classList.remove('visible');\n}\n\nfunction clearGallery() {\n    const galleryContainer = document.querySelector('.gallery');\n    if (galleryContainer) galleryContainer.innerHTML = '';\n}\n\nfunction createGallery(images) {\n    return images.map(\n        ({ previewURL, largeImageURL, tags, likes, views, comments, downloads }) => \n            `<li class=\"gallery__item\">\n                <a class=\"gallery__link\" href=\"${largeImageURL}\">\n                    <img class=\"gallery__image\" src=\"${previewURL}\" alt=\"${tags}\" />\n                    <div class=\"info\">\n                        <p><b>Likes:</b> ${likes}</p>\n                        <p><b>Views:</b> ${views}</p>\n                        <p><b>Comments:</b> ${comments}</p>\n                        <p><b>Downloads:</b> ${downloads}</p>\n                    </div>\n                </a>\n            </li>`)\n    .join(\"\");\n}\n\nfunction renderGallery(images) {\n    const galleryContainer = document.querySelector('.gallery');\n    galleryContainer.insertAdjacentHTML(\"beforeend\", createGallery(images));\n    gallery_box.refresh();\n}\nconst loadMoreButton = document.querySelector('.load-more-hidden');\nfunction showLoadMoreButton() {\n\n    loadMoreButton.classList.replace('load-more-hidden', 'load-more');\n}\nfunction hideLoadMoreButton() {\n      loadMoreButton.classList.replace('load-more', 'load-more-hidden');\n}\n\n\nexport { createGallery, renderGallery, showLoader, hideLoader, clearGallery, showLoadMoreButton, hideLoadMoreButton };","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\n\nimport { getImagesByQuery } from './js/pixabay-api.js';\nimport {\n    renderGallery,\n    showLoader,\n    hideLoader,\n    clearGallery,\n    showLoadMoreButton,\n    hideLoadMoreButton,\n    createGallery\n} from './js/render-functions.js';\n\nlet page = 1;\nlet query = '';\nconst form = document.querySelector('.form');\nconst loadMoreButton = document.querySelector('.load-more-hidden');\nconst gallery = document.querySelector('.gallery');\n\nform.addEventListener('submit', onFormSubmit);\nloadMoreButton.addEventListener('click', onLoadMore);\n\nasync function onFormSubmit(event) {\n    event.preventDefault();\n    query = event.currentTarget.elements[\"search-text\"].value.trim();    \n        if (!query) {\n            iziToast.error({\n                title: 'Error',\n                message: 'Please enter a search query!',\n            });\n            return;\n        }\n        clearGallery();\n        page = 1;\n        showLoader();\n        hideLoadMoreButton();\n        try {\n            const data = await getImagesByQuery(query, page);\n            hideLoader();\n            if (data.hits.length === 0) {\n                iziToast.error({\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n                });\n                return\n            }\n            renderGallery(data.hits);\n            const totalPages = Math.ceil(data.totalHits / 15);\n                if (page < totalPages) {\n                     showLoadMoreButton();\n                } else {\n                    iziToast.info({\n                        title: 'Info',\n                        message: \"We're sorry, but you've reached the end of the search results.\",\n                    });\n                }\n        } catch (error) {\n            console.error('Error fetching images:', error);\n            iziToast.error({\n                title: 'Error',\n                message: 'An error occurred while fetching images. Please try again later.',\n            });\n        }\n          finally {\n            hideLoader()\n        }\n}\n\nasync function onLoadMore() {\n    page++;\n    showLoader();\n    try {\n        const data = await getImagesByQuery(query, page);\n        \n        renderGallery(data.hits);\n        smoothScrollAfterLoad();\n        if (page >= Math.ceil(data.totalHits / 15)) {\n            hideLoadMoreButton();\n            iziToast.info({\n                title: 'Info',\n                message: \"We're sorry, but you've reached the end of the search results.\",\n            });\n            return;\n        }\n        \n        } catch (error) {\n            iziToast.error({\n                title: 'Error',\n                message: 'An error occurred while fetching images. Please try again later.',\n            });\n    } finally {\n        hideLoader();\n    }\n}\n\nfunction smoothScrollAfterLoad() {\n    const firstCard = document.querySelector('.gallery .gallery__item');\n    if (!firstCard) return;\n    const { height: cardHeight } = firstCard.getBoundingClientRect();\n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: 'smooth',\n        });\n};\n"],"names":["apiKey","axios","getImagesByQuery","query","page","error","gallery_box","SimpleLightbox","loader","showLoader","hideLoader","clearGallery","galleryContainer","createGallery","images","previewURL","largeImageURL","tags","likes","views","comments","downloads","renderGallery","loadMoreButton","showLoadMoreButton","hideLoadMoreButton","form","onFormSubmit","onLoadMore","event","iziToast","data","totalPages","smoothScrollAfterLoad","firstCard","cardHeight"],"mappings":"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"}